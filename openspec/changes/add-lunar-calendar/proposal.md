# Change: 添加农历查询功能

## Why

用户无法查询农历日期信息。当用户询问"今天是农历几号"、"今年是什么生肖年"、"春节是哪天"等问题时，系统无法回答。农历在中国传统文化和日常生活中仍然非常重要，很多节日、生日、纪念日都使用农历，缺少这个功能会影响用户体验。

## What Changes

- 新增 `get_lunar_date` 工具，提供农历日期查询功能
- 集成 `github.com/6tail/lunar-go` 库，支持公历农历互转
- 支持以下信息查询：
  - 农历日期（年月日）
  - 干支纪年（年柱、月柱、日柱）
  - 生肖
  - 节气（当前节气或最近的节气）
  - 节日（传统节日、法定节假日）
  - 可选：黄历信息（宜忌、冲煞等）

## Impact

- **新增依赖**：`github.com/6tail/lunar-go`（MIT 协议，无第三方依赖）
- **新增工具**：`internal/tools/lunar.go`
- **注册工具**：在 `internal/pipeline/pipeline.go` 中注册 `LunarDateTool`
- **影响模块**：工具系统（tools）

## User Experience

**使用场景示例：**
1. 用户："今天农历几号？"
   - 回答："今天是农历二〇二六年腊月廿八，丙寅(虎)年"

2. 用户："今年是什么年？"
   - 回答："今年是丙寅年，生肖属虎"

3. 用户："离春节还有几天？"
   - 回答："春节是农历正月初一，今年的春节是2026年2月17日，还有2天"

4. 用户："今天宜做什么？"
   - 回答："今日宜：祭祀、祈福、求嗣...；忌：动土、破土..."

## Implementation Complexity

- **复杂度**：低
- **风险**：低（纯查询功能，无状态，无外部 API 调用）
- **工作量**：约 2-3 小时

## Alternatives Considered

1. **扩展现有 DateTimeTool**
   - 优点：保持工具数量少
   - 缺点：参数设计复杂，职责不清晰
   - 决策：不采用

2. **自研农历算法**
   - 优点：无外部依赖
   - 缺点：复杂度高，易出错，维护成本高
   - 决策：不采用

3. **使用成熟的 lunar-go 库** ✅
   - 优点：功能完整、准确、无第三方依赖、MIT 协议
   - 缺点：增加一个依赖
   - 决策：采用

## Success Criteria

- [ ] 用户可以查询当前农历日期
- [ ] 用户可以查询干支纪年和生肖
- [ ] 用户可以查询节气信息
- [ ] 用户可以查询传统节日
- [ ] 单元测试覆盖核心功能
- [ ] 编译和测试全部通过
