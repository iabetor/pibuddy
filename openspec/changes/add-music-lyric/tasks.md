# Tasks: 音乐歌词显示

## 阶段 1：歌词获取（后端）

### 1.1 数据结构定义
- [ ] 1.1.1 在 `internal/music/lyric.go` 定义 `Lyric` 结构体
- [ ] 1.1.2 定义 `LyricLine` 结构体（时间戳 + 文本）
- [ ] 1.1.3 定义 `LyricProvider` 接口

### 1.2 LRC 解析器
- [ ] 1.2.1 实现 LRC 元数据解析（`[ti:]`、`[ar:]`、`[al:]`）
- [ ] 1.2.2 实现 LRC 时间标签解析（`[mm:ss.xx]` 格式）
- [ ] 1.2.3 支持多时间标签行
- [ ] 1.2.4 添加单元测试

### 1.3 QQ 音乐歌词接口
- [ ] 1.3.1 在 `QQMusicClient` 实现 `GetLyric` 方法
- [ ] 1.3.2 调用 `/lyric?songmid=xxx` 接口
- [ ] 1.3.3 解析返回的 LRC 格式

### 1.4 网易云音乐歌词接口
- [ ] 1.4.1 在 `NeteaseClient` 实现 `GetLyric` 方法
- [ ] 1.4.2 调用 `/lyric?id=xxx` 接口
- [ ] 1.4.3 解析返回的 JSON 格式转换为 Lyric

### 1.5 歌词缓存
- [ ] 1.5.1 实现本地文件缓存
- [ ] 1.5.2 缓存键：`{provider}_{song_id}.lrc`

## 阶段 2：Web UI 显示

### 2.1 HTTP API
- [ ] 2.1.1 添加 `/api/lyric/current` 端点
- [ ] 2.1.2 返回当前播放歌曲的歌词
- [ ] 2.1.3 根据播放进度计算当前行

### 2.2 前端页面
- [ ] 2.2.1 创建歌词显示页面
- [ ] 2.2.2 实时轮询或 WebSocket 推送
- [ ] 2.2.3 歌词高亮当前行
- [ ] 2.2.4 歌词滚动动画

## 阶段 3：树莓派集成

### 3.1 硬件选型
- [ ] 3.1.1 确定屏幕类型（LCD/OLED/HDMI）
- [ ] 3.1.2 采购硬件

### 3.2 集成实现
- [ ] 3.2.1 方案 A：Chromium Kiosk 模式
- [ ] 3.2.2 方案 B：Fyne GUI 应用
- [ ] 3.2.3 方案 C：帧缓冲直接绘制

### 3.3 开机自启
- [ ] 3.3.1 配置 systemd 服务
- [ ] 3.3.2 配置开机自启

## 测试

- [ ] LRC 解析器单元测试
- [ ] QQ 音乐歌词接口测试
- [ ] 网易云音乐歌词接口测试
- [ ] Web UI 端到端测试
