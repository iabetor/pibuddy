audio:
  sample_rate: 16000
  channels: 1
  frame_size: 512

wake:
  model_path: "./models/kws"
  keywords_file: "./models/kws/keywords.txt"
  threshold: 0.5

vad:
  model_path: "./models/vad/silero_vad.onnx"
  threshold: 0.5
  min_silence_ms: 6000  # 静音 6 秒视为说话结束（平衡响应速度和停顿容忍）

asr:
  model_path: "./models/asr"
  num_threads: 2

llm:
  provider: "openai"
  api_url: "https://api.deepseek.com/v1"
  api_key: "${PIBUDDY_LLM_API_KEY}"
  model: "deepseek-chat"
  system_prompt: |
    你是小派，运行在树莓派上的智能家庭助手。

    【核心原则】
    - 说人话，像朋友聊天，不要客服腔
    - 回复尽量控制在2-3句话以内，能一句说清的不用两句
    - 不说废话，不说"好的"、"没问题"、"当然可以"等口水词，直接给答案
    - 不用 emoji，不用书面语
    - 需要调用工具时直接调用，不要说"我来帮你查一下"
    - 回复连贯，不要分段太多

    【能力】
    查询天气/空气质量、农历/黄历/节气、新闻热搜、股票行情、闹钟提醒、备忘录、数学计算、时间日期、播放音乐、声纹识别。

    【声纹识别】
    你具备声纹识别能力，能通过声音自动识别当前说话的人。如果系统已识别出说话人，会在对话上下文中告诉你当前是谁在说话，直接用对方的名字称呼即可。

    【音乐播放】
    用户想听歌时，直接调用 play_music 工具，传入关键词即可。不要列出搜索结果让用户选，直接播放最匹配的歌。

    闲聊讲故事时可以适当多说几句，但日常问答务必精简。
  max_history: 10
  max_tokens: 500

tts:
  engine: "tencent"
  tencent:
    secret_id: "${PIBUDDY_TENCENT_SECRET_ID}"
    secret_key: "${PIBUDDY_TENCENT_SECRET_KEY}"
    voice_type: 101001
    region: "ap-guangzhou"
    speed: 0
  edge:
    voice: "zh-CN-XiaoxiaoNeural"
  piper:
    model_path: "./models/piper/zh_CN-huayan-medium.onnx"

log:
  level: "debug"
  # file: "/var/log/pibuddy/pibuddy.log"  # 日志文件路径，注释掉则只输出到控制台
  max_size: 64      # 单个日志文件最大 64MB
  max_backups: 3    # 保留 3 个旧日志文件
  max_age: 7        # 旧日志文件保留 7 天

dialog:
  continuous_timeout: 10  # 连续对话超时（秒），回复后等待用户继续说话的时间
  wake_reply: "我在，请问有什么可以帮助您的？"  # 唤醒回复语，为空则不播放
  interrupt_reply: "我在"  # 打断播放时的回复语，区别于唤醒回复
  listen_delay: 800  # 播放回复语后延迟进入监听的时间（毫秒），给用户反应时间

voiceprint:
  enabled: true
  model_path: "./models/voiceprint/3dspeaker_speech_campplus_sv_zh-cn_16k-common.onnx"
  threshold: 0.6
  num_threads: 1
  buffer_secs: 3.0
  owner_name: "主人"  # 主人姓名，用于权限控制

tools:
  data_dir: "~/.pibuddy"
  weather:
    api_host: "q75ctvjkwx.re.qweatherapi.com"
    # JWT 认证（推荐）
    credential_id: "${PIBUDDY_QWEATHER_CREDENTIAL_ID}"
    project_id: "${PIBUDDY_QWEATHER_PROJECT_ID}"
    private_key_path: "./ed25519-private.pem"
    # API Key 认证（回退）
    api_key: "${PIBUDDY_QWEATHER_API_KEY}"
  music:
    enabled: true
    provider: "qq"  # netease 或 qq
    cache_dir: ""        # 缓存目录，默认 {data_dir}/music_cache
    cache_max_size: 500  # 缓存最大大小（MB），0 表示禁用缓存
    # 网易云音乐
    netease:
      api_url: "http://localhost:3000"  # NeteaseCloudMusicApi 地址
    # QQ 音乐
    qq:
      api_url: "http://localhost:3300"  # QQMusicApi 地址
  rss:
    enabled: true
    cache_ttl: 30  # 缓存有效期（分钟），默认 30
