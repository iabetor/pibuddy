audio:
  sample_rate: 16000
  channels: 1
  frame_size: 512

wake:
  model_path: "./models/kws"
  keywords_file: "./models/kws/keywords.txt"
  threshold: 0.5

vad:
  model_path: "./models/vad/silero_vad.onnx"
  threshold: 0.5
  min_silence_ms: 5000  # 静音 5 秒视为说话结束（延长以适应说话慢的情况）

asr:
  model_path: "./models/asr"
  num_threads: 2

llm:
  provider: "openai"
  api_url: "https://api.deepseek.com/v1"
  api_key: "${PIBUDDY_LLM_API_KEY}"
  model: "deepseek-chat"
  system_prompt: |
    你是小派，一个运行在树莓派上的智能家庭助手。
    
    【回复原则】
    1. 简洁友好，口语化，适合语音播报
    2. 不要使用 emoji 表情符号
    3. 如果需要调用工具（如查询天气、黄历等），直接调用，不要先说"我来帮你查询..."
    4. 回复要连贯完整，尽量把相关信息说完整再停顿，避免分段过多
    
    【能力】
    你可以：
    - 查询天气（实时天气、天气预报、空气质量）
    - 查询农历、黄历、节气、节日、干支、生肖
    - 查询新闻热搜、股票行情
    - 设置闹钟提醒、记录备忘
    - 做数学计算、告诉时间日期
    - 播放音乐
    
    【音乐播放流程】
    1. 先调用 search_music 搜索
    2. 告诉用户搜索结果（列出：序号. 歌名 - 歌手）
    3. 询问用户要播放哪一首
    4. 用户确认后调用 play_music 播放
    
    你也可以和用户闲聊、讲故事、回答问题。讲故事或回答问题时可以适当详细。
  max_history: 10
  max_tokens: 1000

tts:
  engine: "tencent"
  tencent:
    secret_id: "${PIBUDDY_TENCENT_SECRET_ID}"
    secret_key: "${PIBUDDY_TENCENT_SECRET_KEY}"
    voice_type: 101001
    region: "ap-guangzhou"
    speed: 0
  edge:
    voice: "zh-CN-XiaoxiaoNeural"
  piper:
    model_path: "./models/piper/zh_CN-huayan-medium.onnx"

log:
  level: "info"
  # file: "/var/log/pibuddy/pibuddy.log"  # 日志文件路径，注释掉则只输出到控制台
  max_size: 64      # 单个日志文件最大 64MB
  max_backups: 3    # 保留 3 个旧日志文件
  max_age: 7        # 旧日志文件保留 7 天

dialog:
  continuous_timeout: 10  # 连续对话超时（秒），回复后等待用户继续说话的时间
  wake_reply: "我在，请问有什么可以帮助您的？"  # 唤醒回复语，为空则不播放
  interrupt_reply: "我在"  # 打断播放时的回复语，区别于唤醒回复
  listen_delay: 500  # 播放回复语后延迟进入监听的时间（毫秒），给用户反应时间

voiceprint:
  enabled: false
  model_path: "./models/voiceprint/3dspeaker_speech_campplus_sv_zh-cn_16k-common.onnx"
  threshold: 0.6
  num_threads: 1
  buffer_secs: 3.0

tools:
  data_dir: "~/.pibuddy"
  weather:
    api_host: "q75ctvjkwx.re.qweatherapi.com"
    # JWT 认证（推荐）
    credential_id: "${PIBUDDY_QWEATHER_CREDENTIAL_ID}"
    project_id: "${PIBUDDY_QWEATHER_PROJECT_ID}"
    private_key_path: "./ed25519-private.pem"
    # API Key 认证（回退）
    api_key: "${PIBUDDY_QWEATHER_API_KEY}"
  music:
    enabled: true
    api_url: "http://localhost:3000"  # NeteaseCloudMusicApi 地址
