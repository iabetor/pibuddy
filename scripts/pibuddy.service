[Unit]
Description=PiBuddy - Smart Voice Assistant
After=network-online.target sound.target
Wants=network-online.target

[Service]
Type=simple
User=pi
Group=audio
WorkingDirectory=/home/pi/pibuddy
ExecStart=/home/pi/pibuddy/pibuddy -config /home/pi/pibuddy/configs/pibuddy.yaml
Restart=on-failure
RestartSec=5

# Environment â€” set API key here or in /home/pi/pibuddy/.env
EnvironmentFile=-/home/pi/pibuddy/.env

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=pibuddy

# Security hardening
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=read-only
ReadWritePaths=/home/pi/pibuddy

# Allow audio device access
SupplementaryGroups=audio

[Install]
WantedBy=multi-user.target
